<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
<script src="../../canvas_test/jQuery-2.1.4.min.js"></script>
    <style>
        path {
  stroke-dasharray: 3000;
  stroke-dashoffset: 3000;
  -webkit-animation: dash 5s linear infinite;
  animation: dash 5s linear infinite;
}

@-webkit-keyframes dash {
  to {
    stroke-dashoffset: 0;
  }
}
@keyframes dash {
  to {
    stroke-dashoffset: 0;
  }
}

    </style>
</head>
<body>

<svg width="580" height="400" xmlns="http://www.w3.org/2000/svg">
 <!-- Created with Method Draw - http://github.com/duopixel/Method-Draw/ -->
 <g>
  <title>MyName</title>
  <rect fill="#fff" id="canvas_background" height="402" width="582" y="-1" x="-1"/>
  <g display="none" overflow="visible" y="0" x="0" height="100%" width="100%" id="canvasGrid">
   <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%"/>
  </g>
 </g>
 <g>
  <title>Layer 1</title>
  <path d="m129.5,36.45c3,0 5,0 6,1c2,2 3.14935,3.47427 4,4c1.90211,1.17557 1.4588,2.69344 2,4c0.76537,1.84776 0.1891,4.01804 0,5c-1.01837,5.288 -4.69255,8.18601 -6,10c-4.13452,5.73635 -7.46446,8.46446 -11,12c-3.53554,3.53554 -4.71412,6.21168 -7,9c-0.8966,1.09367 -2,3 -2,4c0,1 1,2 3,2c3,0 5,0 8,0c3,0 6.84068,-2.33592 15,-6c4.91257,-2.20606 7,-3 11,-5c2,-1 7,-3 9,-4c2,-1 3.29289,-1.29289 4,-2c0.70711,-0.70711 2.22626,0.83521 -3,3c-1.84776,0.76537 -9.70209,6.57356 -17,10c-7.73399,3.63117 -15.88683,8.29546 -26,12c-8.908,3.26307 -18.21003,7.56158 -29,13c-9.19384,4.63393 -17,8 -23,11c-6,3 -14,7 -18,9c-2,1 -4.19577,1.64886 -8,4c-4.25325,2.62866 -6.38688,4.9176 -9,6c-0.92388,0.38269 2.70848,-0.67261 9,-3c7.734,-2.86099 15.86591,-6.39 27,-10c13.8504,-4.49072 26.70119,-8.17161 52,-14c10.89494,-2.51 19.00706,-3.93839 28,-5c8.00667,-0.94518 15.0121,-1.91869 22,-3c6.01122,-0.93018 10.06456,-1.19909 15,-2c3.12144,-0.50654 4.82375,-1.48626 7,-2c1.9465,-0.4595 3.24777,0.28316 1,2c-6.40714,4.89374 -11.09444,5.79726 -22,11c-4.03633,1.92562 -6.186,2.69255 -8,4c-2.29454,1.65381 -3.29289,1.29289 -4,2c-0.70711,0.70711 -0.54915,2.95517 -4,4c-0.95709,0.28979 -2.29289,-0.70711 -3,0c-0.70711,0.70711 -1.29289,1.29289 -2,2c-0.70711,0.70711 -2.19028,0.88152 -4,4c-2.24469,3.868 -3.14774,5.94341 -5,11c-1.08769,2.96933 -1.34518,7.17697 -3,12c-0.72569,2.11504 -2.63345,6.02248 -3,9c-0.50377,4.09221 -1,8 -1,9c0,2 -1,4 0,4c3,0 -1,-7 -1,-9c0,-4 0,-7 0,-12c0,-4 0,-8 0,-10c0,-4 0,-7 0,-8c0,-2 0,-3 0,-4c0,-1 -0.29454,-2.34619 2,-4c1.814,-1.30745 3,-2 4,-3c1,-1 3.06601,-1.12234 5,0c3.11848,1.80972 4,4 5,5c1,1 1.61731,2.07613 2,3c0.5412,1.30656 2.48625,1.82375 3,4c0.4595,1.9465 0,4 0,10c0,3 0.91901,5.10701 0,9c-0.51375,2.17625 -0.63345,6.02248 -1,9c-0.50377,4.09221 -1.5405,7.0535 -2,9c-0.51375,2.17625 -1,3 -1,5c0,1 -1.44804,3.57719 -4,2c-1.90211,-1.17557 -5,-4 -11,-8c-3,-2 -6,-4 -7,-5c-1,-1 -1,-3 -1,-4c0,-1 0.82375,-2.48625 3,-3c5.83949,-1.37852 8,0 9,0c1,0 1,1 1,4c0,1 -0.09789,4.82443 -2,6c-0.85065,0.52573 -2.4588,1.69344 -3,3c-0.38269,0.92387 2.82443,1.09789 4,3c0.52573,0.85065 1,2 1,3c0,2 -2.55278,5.10558 -3,6c-2.23607,4.47214 -11.68471,9.12685 -17,14c-4.71973,4.32713 -9,9 -14,13c-5,4 -5.09789,6.82443 -7,8c-0.85065,0.52573 -0.99513,1.09854 0,1c15.22261,-1.50734 22.95797,-4.13081 29,-6c6.9549,-2.1516 13.15927,-3.61064 16,-5c3.23892,-1.58411 3.29289,-2.29289 4,-3c0.70711,-0.70711 0,-3 1,-4c1,-1 1,-2 1,-3c0,-1 -0.93414,-1.14429 -3,-2c-2.92157,-1.21014 -4.29289,-1.29289 -5,-2c-0.70711,-0.70711 -1.47427,-2.14935 -2,-3c-1.17557,-1.90211 -2,-3 -3,-4c-1,-1 -1,-2 -1,1c0,1 0,7 0,9c0,6 0,8 0,12c0,4 0,7 0,10c0,2 0,7 0,9c0,2 0,7 0,11c0,3 0.85529,7.05244 0,14c-0.50377,4.09224 -1,11.00002 -1,15.00002c0,6 0,10 0,14c0,4 0,10 0,15c0,6 0,10 0,17c0,7 0.49873,14.94672 1,22c0.638,8.97736 0.1752,14.03409 1,24c0.50171,6.06204 2,14 4,21l2,6l1,3" id="svg_1" stroke-width="1.5" stroke="#000" fill="none"/>
  <path d="m216.5,134.45c0,-1 1,3 1,6c0,4 0,11 0,16c0,4 0,7 0,9c0,2 0,5 0,8c0,1 0,4 0,5c0,1 -1,-4 -1,-7c0,-4 0,-8 0,-10c0,-2 0,-4 0,-7c0,-2 0,-5 0,-7c0,-1 0,-3 0,-4c0,-1 -0.38269,-2.07613 0,-3c0.5412,-1.30656 1.1731,-1.85274 2,-3c1.30745,-1.814 1.29289,-3.29289 2,-4c1.41422,-1.41422 0.69344,-2.4588 2,-3c0.92387,-0.38269 1.87782,-0.99251 2,0c0.50377,4.09221 1,8 1,15c0,4 0,8 0,12c0,2 0.32036,7.02582 0,9c-0.50655,3.12144 -1.33749,8.31001 -3,11c-0.7435,1.203 -0.29289,3.29289 -1,4c-0.70711,0.70711 -1,1 -2,-1c-2,-4 -2,-7 -2,-9c0,-2 -1,-4 -1,-6c0,-1 4.35403,-5.9209 14,-12c7.56691,-4.76883 21,-10 29,-14c6,-3 9.74673,-6.37134 14,-9c1.9021,-1.17557 5.41885,-3.41886 7,-5c1.58115,-1.58114 1,-4 1,-5c0,-1 0,-2 0,-3c0,-1 0,-3 -1,-4c-1,-1 -2,-3 -3,-4c-1,-1 -5,-3 -6,-4c-2,-2 -2.69345,-2.4588 -4,-3c-0.92389,-0.38268 -2.07611,-0.38268 -3,0c-2.61313,1.08239 -4.41885,2.25658 -6,7c-0.94867,2.84605 -2.54863,7.76993 -4,12c-1.65482,4.82303 -2,9 -2,13c0,3 -1,6 -1,9c0,2 0,3 0,5c0,1 -0.38269,3.07613 0,4c0.5412,1.30656 2.82375,2.48625 5,3c0.97324,0.22975 4,0 5,0c2,0 3.71973,0.67287 -1,5c-2.65765,2.43658 -8.72961,7.22885 -13,12c-2.82951,3.16132 -5.71413,5.21167 -8,8c-1.7932,2.18735 -3.29289,2.29289 -4,3c-0.70711,0.70711 0,2 0,3c0,1 -1.41422,2.58578 0,4c1.41422,1.41422 2.83809,1.46552 8,3c4.88763,1.45294 9,2 14,2c4,0 7.01947,0.60585 11,1c5.07422,0.50244 7,1 8,1c1,0 -1.26108,3.59424 -3,5c-4.97949,4.0255 -11,10 -14,13c-2,2 -4.3775,1.6371 -4,3c1.10059,3.9735 8.03748,1.38908 13,2c4.09222,0.50377 17,1 23,1c7,0 13.0535,0.4595 15,0c2.17624,-0.51375 1.77023,-2.02675 2,-3c0.51373,-2.17625 1,-3 1,-5c0,-1 1.1731,-1.85274 2,-3c1.30746,-1.814 1.61731,-3.07613 2,-4c0.5412,-1.30656 3.61731,-4.07613 4,-5c0.5412,-1.30656 2,-4 3,-5c2,-2 1.78986,-4.07843 3,-7c0.85571,-2.06586 1.56952,-4.133 3,-8c0.77579,-2.09717 2.49347,-3.87856 3,-7c0.32037,-1.97418 -0.16019,-3.01291 0,-4c0.50653,-3.12144 -0.41422,-4.58578 1,-6c0.70709,-0.70711 1,-1 1,-3l0,-1l0,-2l0,-2" id="svg_2" stroke-width="1.5" stroke="#000" fill="none"/>
  <path d="m397.5,104.45c3,0 5.41208,-1.03145 9,1c1.23065,0.69678 2.41885,0.41886 4,2c1.58115,1.58114 1.69254,2.186 3,4c0.8269,1.14727 1.82443,1.09789 3,3c1.57718,2.55196 1.49347,6.87856 2,10c0.32037,1.97417 0,5 0,7c0,3 0,6 0,9c0,4 0,9 0,13c0,2 0.11865,8.02521 -1,13c-0.90457,4.02266 -2.99023,8.79025 -4,16c-0.41611,2.97101 0.36655,7.02248 0,10c-0.50378,4.09221 -2,6 -1,6c1,0 0,-4 0,-9c0,-5 -1.09964,-9.06743 0,-18c0.50378,-4.09221 2.09586,-10.97923 4,-20c1.05313,-4.98907 2.49347,-12.87856 3,-16c0.8009,-4.93544 0.4588,-5.69344 1,-7c0.38269,-0.92388 -3.52222,2.38074 -6,5c-3.43607,3.63226 -8.47232,8.47231 -13,13c-4.52768,4.52769 -6.51929,8.5582 -9,12c-2.6149,3.62799 -2.1731,5.85274 -3,7c-1.30746,1.814 -2.29291,3.29289 -3,4c-0.70709,0.70711 0,2 0,3c0,1 0.0535,2.4595 2,2c8.70502,-2.05498 15.06659,-6.87036 21,-10c9.10651,-4.8033 14.70251,-8.56349 20,-11c2.87296,-1.32138 6.82443,-2.09789 8,-4c1.05145,-1.70131 0.94855,-2.29869 2,-4c1.17557,-1.90211 3,-4 4,-5c1,-1 2.61731,-4.07613 3,-5c0.5412,-1.30656 0.43463,-5.15099 3,-7c0.81125,-0.58471 0.03552,-3.50424 3,-8c1.55704,-2.36129 1.34518,-5.17697 3,-10c1.45139,-4.23007 3.73145,-9.07689 5,-13c1.65686,-5.12395 2.9725,-6.6475 4,-11c1.14877,-4.86624 0.50732,-9.02433 1,-14c0.50244,-5.0742 1.75565,-10.01498 2,-12c0.50378,-4.09221 2,-6 2,-9c0,-2 1,-4 0,-4c-1,0 0.73135,13.00516 1,20c0.50037,13.0288 2.49829,19.93797 3,26c0.24744,2.98978 1.14429,4.93414 2,7c1.21014,2.92156 1.05637,4.33101 2,4c6.04218,-2.11948 10.19891,-8.53236 13,-10c8.85779,-4.64107 11.21262,-8.67121 16,-12c5.25717,-3.65543 9.34619,-7.70546 11,-10c1.30743,-1.814 2.29291,-2.29289 3,-3c0.70709,-0.70711 1,-2 3,-2c1,0 2.37854,2.16051 1,8c-0.51373,2.17625 -3.19189,6.65447 -9,13c-6.22485,6.80082 -12.19556,10.8118 -17,16c-6.26422,6.76459 -14.47232,12.47231 -19,17c-4.52768,4.52769 -9.186,8.69255 -11,10c-2.29453,1.65381 -4,3 -5,4c-1,1 -0.9465,2.4595 1,2c4.35251,-1.02748 6.83551,-2.99399 16,-4c1.98807,-0.21823 10,-1 12,-1c3,0 5.92389,-0.61731 5,-1c-1.30655,-0.5412 -2.52222,4.38074 -5,7c-3.43607,3.63226 -6,5 -7,6c-2,2 -3.70709,3.29289 -3,4c2.12131,2.12132 6.02582,0.67964 8,1c6.24289,1.01308 8.4588,2.69344 9,4c0.38269,0.92387 0.58908,2.69238 -4,6c-1.814,1.30745 -6.61716,5.12686 -14,11c-7.74713,6.16295 -15.45236,12.45428 -24,20c-9.54184,8.42337 -15.40402,15.41156 -20,19c-4.45877,3.48129 -6.61731,9.07613 -7,10c-0.5412,1.30656 -1.70709,2.29289 -1,3c0.70709,0.70711 6.87433,-0.55698 19,-3c12.89386,-2.59779 38.09006,-9.71471 48,-13c11.11011,-3.68317 16.53973,-8.46873 24,-10c0.97955,-0.20107 1,-1 1,-2c0,-1 0,-3 0,-5c0,-3 0.16016,-5.01291 0,-6c-0.50653,-3.12144 -1.8244,-6.09789 -3,-8c-2.62866,-4.25325 -4.21167,-7.71413 -7,-10c-2.18735,-1.7932 -5,-6 -7,-8c-3,-3 -4.16125,-5.79626 -8,-9c-1.71674,-1.43275 -4.58578,-2.58578 -6,-4c-0.70709,-0.70711 -1,-1 -1,0c0,1 0,3 0,6c0,4 0,9 0,14c0,5 0,12 0,19c0,6 0,13 0,18c0,6 0,10 0,17c0,4 0,10 0,14c0,4 0,7 0,11c0,4 0,7 0,9c0,2 -0.76538,5.15227 0,7.00002c0.5412,1.30655 1,4 1,6c0,3 -0.32037,5.02582 0,7c0.50653,3.12143 0.31073,5.08026 1,8c0.51373,2.17624 1,4 1,7c0,1 0.49347,2.87857 1,6c0.32037,1.97418 1,3 1,5c0,3 0,4 0,8c0,2 1,4 1,6c0,1 1,3 1,5c0,1 -0.32037,3.02582 0,5c0.50653,3.12143 0.31073,5.08026 1,8c0.51373,2.17624 1.49347,2.87857 2,6c0.16019,0.98709 -0.4595,3.0535 0,5c0.51373,2.17624 1.83981,4.01291 2,5c0.50653,3.12143 1.48627,3.82376 2,6c0.4595,1.9465 2,7 2,9c0,2 1.0654,5.97897 2,9c2.15158,6.9549 3,12 5,19l3,8l2,8l1,8" id="svg_3" stroke-width="1.5" stroke="#000" fill="none"/>
  <path d="m403.5,63.45c0,2 1.69254,3.186 3,5c0.8269,1.14727 1.69254,3.186 3,5c0.8269,1.14727 1,2 2,3c1,1 1.4588,2.69344 2,4c0.38269,0.92388 0,2 1,3l0,1l1,0l0,1" id="svg_4" stroke-width="1.5" stroke="#000" fill="none"/>
  <polyline stroke-linecap="round" id="svg_5" points="191.5,54.44999694824219 191.5,53.44999694824219 " stroke-width="1.5" stroke="#000" fill="none"/>
 </g>
</svg>


<script>
    // 配置位移矢量 一共走100步 var STEP = 100; var curStep = 0; var path = $('#path')[0]; var $car = $('#car'); var timer = null; // 最重要的两个属性 获取长度，以及每个点的坐标 var totalLength = path.getTotalLength(); var initPosition = path.getPointAtLength(0); var prePosition = initPosition; var curPosition = initPosition; // 获取前进切线角度 function getRotate(a, b) { var k = (b.y - a.y) / (b.x - a.x); var rotate = Math.atan(k) * 180 / Math.PI; return k < 0 ? rotate + 90 : rotate - 90; } // 定位car $car.css({ left: initPosition.x, top:initPosition.y, '-webkit-transform': 'translate(-2px, 0) rotate(' + getRotate(curPosition , path.getPointAtLength(1)) +'deg)' }).show() // 定时器控制前进 timer = setInterval(function() { if (curStep != STEP) { curStep++; curPosition = path.getPointAtLength(totalLength/STEP * curStep); $car.css({ left: curPosition.x, top:curPosition.y, '-webkit-transform': 'translate(-2px, 0) rotate('+getRotate(prePosition, curPosition)+'deg)' }).show(); prePosition = curPosition; } else { clearInterval(timer); } }, 100)
    var STEP = 100;
var curStep = 0;

var path = $('#path')[0];
var $car = $('#car');

var timer = null;
var totalLength = path.getTotalLength();
var initPosition = path.getPointAtLength(0);
var prePosition = initPosition;
var curPosition = initPosition;


function getRotate(a, b) {
  var k = (b.y - a.y) / (b.x - a.x);
  var rotate = Math.atan(k) * 180 / Math.PI;
  return k < 0 ? rotate + 90 : rotate - 90;
}

// 定位car
$car.css({
  left: initPosition.x,
  top:initPosition.y,
  '-webkit-transform': 'translate(-2px, 0) rotate(' + getRotate(curPosition , path.getPointAtLength(1)) +'deg)'
}).show()

timer = setInterval(function() {

  if (curStep != STEP) {
    curStep++;

    curPosition = path.getPointAtLength(totalLength/STEP * curStep);


    $car.css({
      left: curPosition.x,
      top:curPosition.y,
     '-webkit-transform': 'translate(-2px, 0) rotate('+getRotate(prePosition, curPosition)+'deg)'
    }).show();
    prePosition = curPosition;
  } else {
    clearInterval(timer);
  }

}, 30);

</script>

</body>
</html>